{"version":3,"sources":["aquaplayer.js"],"names":["window","requirejs","$","axios","getDeviceType","navigator","userAgent","match","startPlayer","get","userid","device_type","then","res","time","console","log","data","href","Date","getTime","setTimeout","iosUrl","now","location","deviceType","catch","androidUrl","err"],"mappings":"AAAA,YACAA,QAAOC,WAAPD,SAAOC,SAGHC,SAAEA,EAAAC,GAUE,QAAOC,KADT,MAEOC,WAAIA,UAAUC,MAAUC,YAAxBF,UAA2CC,UAAAC,MAAA,SACzC,MACEF,UAAUC,UAAUC,MAAM,YAC5B,UACRF,UAAAC,UAAAC,MAAA,QACF,UADE,GAGH,QAASC,KAGPL,GAAMM,GAAIL,GAENM,GAAAA,IAAQ,sBACRC,QAFMD,OAAA,IAKTE,YAAeC,KAGZD,KAAIE,SAAQD,GAEZb,GADAe,QAAQC,IAAIH,EAAII,MACAC,QAAhBlB,EAAuBa,CAFvB,GAAIC,IAAQ,GAAIK,OAAQC,SAIxBC,SAAAA,IAAWR,EAAAI,KAAYK,QACrBD,OAAAA,SAAWH,KAAYL,EAAAI,KAAAK,OAErBD,WAAKE,WACHvB,WAAOwB,YACR,GAAAL,OAAAC,UAJHN,EAAA,MADFd,OAAAwB,SAAA,8DASAT,KACAf,SACD,YAAAyB,IAEFC,QAAMV,IAAAH,EAAAI,KAAeU,YACpBZ,OAAAS,SAAAN,KAAAL,EAAAI,KAAAU,cAnDRD,MAAA,SAAAE,GAmDQb,QAAQC,IAAIY,KAhDhB1B,EAAE,cAKAM,EAAAA,iBAAAA,GAAAA,QAAAA,WAFFO,QAAAC,IAAA,UAEER","file":"../javascripts/aquaplayer.js","sourcesContent":["'use strict';\nwindow.requirejs(\n  ['jquery', 'axios'],\n  function ($, axios) {\n    $(function () {\n    });\n\n    $('#start-player').on('click', function () {\n      console.log('start!');\n      startPlayer();\n    });\n\n    function getDeviceType () {\n      if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPad/i))) {\n        return 'ios';\n      } else if (navigator.userAgent.match(/Android/i)) {\n        return 'android';\n      } else if (navigator.userAgent.match(/Mac/i)) {\n        return 'mac';\n      }\n    };\n\n    function startPlayer () {\n      var deviceType = getDeviceType();\n\n      axios.get('/api/v1/aquaplayer', {\n        params: {\n          userid: 123,\n          device_type: deviceType\n        }\n      })\n      .then(function (res) {\n        console.log(res.data);\n        if (deviceType === 'iOS') {\n          var time = (new Date()).getTime();\n          console.log(res.data.iosUrl);\n          window.location.href = res.data.iosUrl;\n\n          setTimeout(function () {\n            setTimeout(function () {\n              var now = (new Date()).getTime();\n              if ((now - time) < 400) {\n                window.location = 'https://itunes.apple.com/kr/app/aquanmanager/id1048325731';\n              }\n            }, 10);\n          }, 300);\n        } else if (deviceType === 'Android') {\n          console.log(res.data.androidUrl);\n          window.location.href = res.data.androidUrl;\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n    };\n  }\n);\n"]}