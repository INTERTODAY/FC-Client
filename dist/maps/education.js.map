{"version":3,"sources":["education.js"],"names":["window","requirejs","$","yearmonth","selectAssignMonth","btnSearchCourse","$notActivelistItem","$listItem","$inputSearchBy","$inputSearchText","inputCourse","each","index","undefined","this","data","insertBefore","focus","val","prop","on","e","preventDefault","optSearchType","change","click","searchBy","searchText","id","btnRadio","attr","location","href","pageNum","which","hasClass","url","params","training_user_id","then","res","axios","get","can_progress","course_id","prev_course_name","success","alert","error","eduName","catch","console"],"mappings":"YAAAA,QAAOC,WACL,SADFD,QAME,aAEA,SAAQE,EAAKF,GAGb,GAKIG,GALAC,EAAAA,GAAAA,OAAAA,EAEAC,EAAAA,EAAAA,gBACAC,EAAAA,EAAqBJ,sBACrBK,EAAcL,EAAA,oCACdC,EAAJD,EAAA,oBACIM,EAAmBN,EAAA,2BACnBO,EAAAA,EAAAA,cAEFD,EAAYN,EAAA,aACVO,EAAmBP,EAAA,cAEjBC,GAAAA,WASAO,GAXJR,EAAE,cAAcS,KAAK,SAAUC,OAIzBC,KAAAV,GAAAA,IAAAD,EAAAY,MAAAC,KAAA,eACHZ,EAAAD,EAAAY,MAAAC,KAAA,aADCb,EAAE,2EAA6EC,EAAY,SAASa,aAAad,EAAEY,UAOnHJ,EAAYO,MACZP,OAAAA,EAAgBD,OAChBP,IAAAA,SACAQ,EAAAO,QACFP,EAAAQ,IAAAT,EAAAS,OACEd,EAAAA,uBAAAe,KAAA,WAAA,EACAf,MACAF,KAAAA,QACAE,EAAAa,QAFAb,EAAkBc,IAAIT,EAAiBS,OAIzChB,EAAA,uBAAAiB,KAAA,WAAA,MAMJT,EAAYU,GAAG,QAAS,WAIxBhB,EAAAA,uBAAqBe,KAAS,WAAY,KAA1Cf,EAAkBgB,GAAG,QAAS,WAI9Bd,EAAAA,uBAAsBa,KAAS,WAAA,KAG9Bb,EAHDc,GAAA,QAAA,SAAAC,GACEA,EAAEC,iBAIJC,OAAAA,MAAcC,qBAGZD,EAAKC,OAAA,WAEH,OADAd,EAAAA,MAAYO,KAAZ,OAEF,IAAA,qBACEb,EAAAA,OACA,MACF,KAAA,qBACEA,EAAAa,WAOFZ,EAAAoB,MAAA,WACA,GAEAC,GACAC,EAHIA,EAAJzB,EAAA,4CAFI0B,EAAKC,EAASC,KAAK,KAOrBH,QAAAA,GACA,IAAA,qBAFAD,EAAW,SAIbC,EAAKjB,EAALQ,KACEQ,MAEA,KAAA,qBACFA,EAAA,QACEC,EAAAvB,EAAAc,MAQFlB,OAAA+B,SAAFC,KACIV,EAAFP,KAAA,YAJI,aAAeW,EAAW,eAAiBC,IAQ/CzB,EAAA,iBAAAkB,GAAA,QAAA,SAAAC,GACAA,EAAAC,gBAHA,IAOAI,GACEA,EAREG,EAAW3B,EAAE,4CAMjB0B,EAAQA,EAARE,KAAA,MAGEH,EAAAA,EAAAA,MAAajB,KAAAA,OAHf,QAAQkB,GAMR,IAAA,qBACEF,EAAAA,SACAC,EAAAA,EAAavB,KACb,MAEA,KAAA,qBAXFsB,EAAA,QAQEC,EAAavB,EAAkBc,MAa/Bb,OAAAA,SAAAA,KACDA,EAAAU,KAAA,YAHH,aAAAW,EAAA,eAAAC,EAAA,SAAAM,IAOE5B,EAAAA,GAAAA,WAAA,SAAAgB,GADF,IAAAA,EAAAa,OAJI7B,EAAgBoB,UAWlBrB,EAAY+B,GAAAA,SAAS,WACnB9B,EAAAoB,UAGFlB,EAAI6B,GAAMlC,QAAQ4B,SAAlBT,GAGEgB,GATFhB,EAAEC,iBASAe,EAAAA,MAAQF,SAAA,cACNG,OAAAA,CAFuB,IAM1BC,GAAKrC,EAAAY,MAAU0B,KAAK,OANrBC,GAAMC,IAAI,iBASRL,QACEC,iBAASK,EAAAA,MAAiB5B,KAAG,oBAC3B6B,UAASC,EAAAA,MAAAA,KAAAA,gBAGVN,KAJD,SAIOC,GACL,GAAAzB,GAAAyB,EAASzB,IAERA,GAAA+B,UACF,IAAA/B,EAAA4B,aACF,KAAA5B,EAAA8B,kBAnBH7C,OAqBO+C,MAAUC,UAAOjC,EAAAkC,QAAA,WAAAlC,EAAA8B,iBAAA,mBA9B1BT,IA1IFpC,OAAA+B,SAAAC,KAAAI,MAwKKc,MAAM,SAAUF,GACfG,QAAQH,MAAMA","file":"../javascripts/education.js","sourcesContent":["window.requirejs([\n  'jquery',\n  'axios',\n  'bootstrap'\n],\nfunction (jQuery, axios) {\n  'use strict';\n\n  var $ = $ || window.$;\n\n  var inputCourse = $('#inputCourse');\n  var selectAssignMonth = $('#selectAssignMonth');\n  var optSearchType = $('input[type=radio][name=optradio]');\n  var btnSearchCourse = $('#btnSearchCourse');\n  var $notActivelistItem = $('.list_item a.not-active');\n  var $listItem = $('.list_item');\n  var yearmonth;\n  var $inputSearchBy = $('#searchby');\n  var $inputSearchText = $('#searchtext');\n\n  $(function () {\n    $('.item_wrap').each(function (index) {\n      if (yearmonth === undefined || yearmonth !== $(this).data('yearmonth')) {\n        yearmonth = $(this).data('yearmonth');\n\n        $('<li class=\"yearmonth\"><i class=\"fa fa-calendar\" aria-hidden=\"true\"></i> ' + yearmonth + '</li>').insertBefore($(this));\n      }\n    });\n\n    if ($inputSearchBy.val()) {\n      switch ($inputSearchBy.val()) {\n      case 'course':\n        inputCourse.focus();\n        inputCourse.val($inputSearchText.val());\n        $('#radio-course-title').prop('checked', true);\n        break;\n      case 'month':\n        selectAssignMonth.focus();\n        selectAssignMonth.val($inputSearchText.val());\n        $('#radio-assign-month').prop('checked', true);\n        break;\n\n      default:\n        break;\n      }\n    }\n  });\n\n  inputCourse.on('focus', function () {\n    $('#radio-course-title').prop('checked', true);\n  });\n\n  selectAssignMonth.on('focus', function () {\n    $('#radio-assign-month').prop('checked', true);\n  });\n\n  $notActivelistItem.on('click', function (e) {\n    e.preventDefault();\n    window.alert('재수강이 불가한 강의입니다.');\n  });\n\n  optSearchType.change(function () {\n    var id = $(this).attr('id');\n    switch (id) {\n    case 'radio-course-title':\n      inputCourse.focus();\n      break;\n    case 'radio-assign-month':\n      selectAssignMonth.focus();\n      break;\n    default:\n      break;\n    }\n  });\n\n  btnSearchCourse.click(function () {\n    var btnRadio = $('input[type=radio][name=optradio]:checked');\n    var id = btnRadio.attr('id');\n    var searchBy;\n    var searchText;\n\n    switch (id) {\n    case 'radio-course-title':\n      searchBy = 'course';\n      searchText = inputCourse.val();\n      break;\n\n    case 'radio-assign-month':\n      searchBy = 'month';\n      searchText = selectAssignMonth.val();\n      break;\n    default:\n      break;\n    }\n\n    window.location.href =\n      btnSearchCourse.data('redirect') +\n        '?searchby=' + searchBy + '&searchtext=' + searchText;\n  });\n\n  $('.pagination a').on('click', function (e) {\n    e.preventDefault();\n\n    var btnRadio = $('input[type=radio][name=optradio]:checked');\n    var id = btnRadio.attr('id');\n    var searchBy;\n    var searchText;\n    var pageNum = $(this).data('page');\n\n    switch (id) {\n    case 'radio-course-title':\n      searchBy = 'course';\n      searchText = inputCourse.val();\n      break;\n\n    case 'radio-assign-month':\n      searchBy = 'month';\n      searchText = selectAssignMonth.val();\n      break;\n    default:\n      break;\n    }\n\n    window.location.href =\n      btnSearchCourse.data('redirect') +\n        '?searchby=' + searchBy + '&searchtext=' + searchText + '&page=' + pageNum;\n  });\n\n  inputCourse.on('keypress', function (e) {\n    if (e.which == 13) {\n      btnSearchCourse.click();\n    }\n  });\n\n  selectAssignMonth.on('change', function () {\n    btnSearchCourse.click();\n  });\n\n  $listItem.on('click', function (e) {\n    e.preventDefault();\n\n    if ($(this).hasClass('not-active')) {\n      return false;\n    }\n\n    var url = $(this).attr('href');\n\n    axios.get('/course/check', {\n      params: {\n        training_user_id: $(this).data('training-user-id'),\n        course_id: $(this).data('course-id')\n      }\n    })\n    .then(function (res) {\n      var data = res.data;\n\n      if (data.success) {\n        if (data.can_progress !== 1) {\n          if (data.prev_course_name !== '') {\n            window.alert('교육과정 : ' + data.eduName + '\\n' + '강의명 : ' + data.prev_course_name + '\\n' + '\\n을 먼저 이수하세요.');\n          }\n        } else {\n          if (url) {\n            window.location.href = url;\n          }\n        }\n      }\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  });\n});\n"]}