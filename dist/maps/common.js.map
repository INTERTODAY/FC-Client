{"version":3,"sources":["common.js"],"names":["window","define","require","$","axios","download","polyfill","res","data","list","length","marquee","duration","forEach","notice","append","id","direction","duplicated","gap","err","pauseOnHover","catch","filename","event","url","on","currentTarget","key","responseType","getAllUrlParams","response","console","log","queryString","split","location","search","slice","obj","i","paramNum","arr","v","paramValue","a","paramName","replace","toLowerCase","push","navigator","getOSName","OSName","appVersion","indexOf"],"mappings":"AAAA,YACAA,QAAOC,QAAPD,SAOEA,QACA,WACAE,cAJA,iBAMAC,SAAEA,EAAYC,EAAAC,GAiDd,MAhDEL,QAAAI,MAAAA,EAGIF,QAAA,eAAAI,WAEEH,EAAAA,WAEAI,EAAAA,IAAIC,mBACFL,KAAE,SAAFI,GAJAA,EAAIC,KAAKC,KAAKC,OAAS,IAOvBP,EAAA,YAAYQ,OAEZC,EAAAA,KAAAA,KAFoBC,QAAA,SAAAC,GAGpBX,EAAA,YAAAY,OAAA,wBAAAD,EAAAE,GAAA,4NAGAC,EAAAA,YAAWN,SAEXO,SAAY,IARdC,IAAA,GAVNF,UAuBmBG,KAvBnBF,YAAA,EAFFG,cAAA,OAyBKC,MAAM,SAAUF,GAQbG,QAAAA,MAAaC,OAIjBC,EAAAA,gBAAKC,GAAA,QAFD,SAAAF,GAGJhB,EAAAA,gBAAM,IAHFe,GAAApB,EAAAqB,EAAAG,eAAAnB,KAAA,WAAAJ,IASFC,OAAAA,OATJoB,IAWGH,sBAAMd,MAXToB,IAAAzB,EAAAqB,EAAAG,eAAAnB,KAAA,QAMEqB,aAAc,SAShBC,KAAAA,SAAAA,GACEzB,EAAA0B,EAAAvB,KAAAe,KALCD,MAAM,SAAAF,GAAA,MAAOY,SAAQC,IAAIb,QAW1BU,gBAAA,SAAAL,GAEE,GAAAS,GAAAT,EAAAA,EAAAU,MAAA,KAAA,GAAAnC,OAAAoC,SAAAC,OAAAC,MAAA,GAGAC,IAGA,IAAAL,EAAA,CAEEA,EAAYM,EAAJL,MAAR,KAAA,EAKEM,KAAAA,GAFFC,GAAID,EAAJN,MAAA,KAEEM,EAAAA,EAAWE,EAAEL,EAAF5B,OAAX8B,IAAA,CAED,GAGGI,GANJC,EAAAH,EAAAF,GAAAL,MAAA,KAAIW,EAAYD,EAAE,GAAGE,QAAQ,UAAW,SAAUJ,GASlDG,MADAL,GAAAE,EAAAL,MAAA,GAAA,GACAQ,KAIIP,MAAgB,KAAAM,EAAA,IAAAA,EAAA,EAGhBN,GAAIO,EAAcP,cACnBK,EAAAA,EAAAI,cAGCT,EAAAO,IAEK,gBAAAP,GAAAO,KACLP,EAAAO,IAAAP,EAAAO,SAGD,KAAAL,EAEDF,EAAAO,GAAAG,KAAAL,GAILL,EAAAO,GAAAL,GAAAG,GAHKL,EAAIO,GAAaF,GAYvB,MAAIM,IAJNC,UAAW,WAQT,GAAAC,GAAA,YAAA,QAnEJ,IAAAF,UAAAG,WAAAC,QAAA,SAAAF,EAAA,YA5DF,IAAAF,UAAAG,WAAAC,QAAA,SAAAF,EAAA,UA4HmD,IAAzCF,UAAUG,WAAWC,QAAQ,SAAeF,EAAS,SACV,IAA3CF,UAAUG,WAAWC,QAAQ,WAAiBF,EAAS,SAEpDA","file":"../javascripts/common.js","sourcesContent":["'use strict';\nwindow.define([\n  'jquery',\n  'axios',\n  'download',\n  'es6-promise',\n  'jqueryMarquee'\n], function ($, axios, download) {\n  window.axios = axios;\n  // https://github.com/stefanpenner/es6-promise 참고\n  require('es6-promise').polyfill();\n\n  $(function () {\n    // 공지사항 조회\n    axios.get('/api/v1/notices')\n      .then(function (res) {\n        // console.log(res.data.list);\n        if (res.data.list.length > 0) {\n          $('.marquee').show();\n\n          res.data.list.forEach(notice => {\n            $('.marquee').append('<li><a href=\"/notice/' + notice.id + '\">' + 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod quia nisi eum quasi? Enim rerum neque odit doloremque quas facere, alias repellendus adipisci recusandae ipsa et explicabo maiores magni hic!' + '</a></li>');\n          });\n\n          $('.marquee').marquee({\n            // duration in milliseconds of the marquee\n            duration: 5000,\n            // gap in pixels between the tickers\n            gap: 50,\n            // 'left' or 'right'\n            direction: 'up',\n            // true or false - should the marquee be duplicated to show an effect of continues flow\n            duplicated: true,\n            pauseOnHover: true\n          });\n        }\n      })\n      .catch(function (err) {\n        console.error(err);\n      });\n  });\n\n  $('#notice-file').on('click', function (event) {\n    event.preventDefault();\n\n    const filename = $(event.currentTarget).data('filename');\n\n    axios({\n      method: 'post',\n      url: '/api/v1/s3-download',\n      data: {\n        key: $(event.currentTarget).data('url')\n      },\n      responseType: 'blob'\n    })\n      .then(response => {\n        download(response.data, filename);\n      })\n      .catch(err => console.log(err));\n  });\n\n  return {\n    getAllUrlParams: function (url) {\n      // get query string from url (optional) or window\n      var queryString = url ? url.split('?')[1] : window.location.search.slice(1);\n\n      // we'll store the parameters here\n      var obj = {};\n\n      // if query string exists\n      if (queryString) {\n        // stuff after # is not part of query string, so get rid of it\n        queryString = queryString.split('#')[0];\n\n        // split our query string into its component parts\n        var arr = queryString.split('&');\n\n        for (var i = 0; i < arr.length; i++) {\n          // separate the keys and the values\n          var a = arr[i].split('=');\n\n          // in case params look like: list[]=thing1&list[]=thing2\n          var paramNum;\n          var paramName = a[0].replace(/\\[\\d*\\]/, function (v) {\n            paramNum = v.slice(1, -1);\n            return '';\n          });\n\n          // set parameter value (use 'true' if empty)\n          var paramValue = typeof (a[1]) === 'undefined' ? true : a[1];\n\n          // (optional) keep case consistent\n          paramName = paramName.toLowerCase();\n          paramValue = paramValue.toLowerCase();\n\n          // if parameter name already exists\n          if (obj[paramName]) {\n            // convert value to array (if still string)\n            if (typeof obj[paramName] === 'string') {\n              obj[paramName] = [obj[paramName]];\n            }\n            // if no array index number specified...\n            if (typeof paramNum === 'undefined') {\n              // put the value on the end of the array\n              obj[paramName].push(paramValue);\n            } else {\n              // if array index number specified...\n              // put the value at that index number\n              obj[paramName][paramNum] = paramValue;\n            }\n          } else {\n            // if param name doesn't exist yet, set it\n            obj[paramName] = paramValue;\n          }\n        }\n      }\n\n      return obj;\n    },\n\n    getOSName: function () {\n      var OSName = 'Unknown OS';\n\n      if (navigator.appVersion.indexOf('Win') !== -1) OSName = 'Windows';\n      if (navigator.appVersion.indexOf('Mac') !== -1) OSName = 'MacOS';\n      if (navigator.appVersion.indexOf('X11') !== -1) OSName = 'UNIX';\n      if (navigator.appVersion.indexOf('Linux') !== -1) OSName = 'Linux';\n\n      return OSName;\n    }\n  };\n});\n"]}