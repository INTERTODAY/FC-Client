{"version":3,"sources":["video.js"],"names":["requirejs","e","n","o","t","i","loop","h","setVolume","ready","then","console","info","getDuration","T","r","catch","error","O","window","confirm","setCurrentTime","pause","g","timer","v","c","stop","s","a","V","Math","floor","w","C","removeClass","S","addClass","y","getCurrentTime","m","log","ajax","type","url","data","training_user_id","q","video_id","P","played_seconds","video_duration","currenttime","done","success","total_played_seconds","msg","u","d","course_id","D","course_list_id","E","j","hasEnded","l","location","href","x","f","delete","params","p","_","b","parent","attr","k","on","preventDefault","reset","setTimeout","start","countdown","startValues","seconds","html","getTimeValues","toString","addEventListener","alert","all","spread","reload","unload"],"mappings":"AAAA,YAAAA,YAAA,SAAA,QAAA,QAAA,YAAA,eAAA,SAAAC,EAAAC,EAAAC,EAAAC,GAAA,QAAAC,KAAA,GAAAJ,IAAAK,MAAA,EAAAC,GAAA,GAAAJ,GAAA,cAAAF,GAAAM,EAAAC,UAAA,IAAAD,EAAAE,QAAAC,KAAA,WAAAC,QAAAC,KAAA,oBAAAL,EAAAM,cAAAH,KAAA,SAAAT,GAAAa,EAAAb,EAAAc,MAAAC,MAAA,SAAAf,GAAAU,QAAAM,MAAAhB,KAAAiB,EAAAJ,EAAA,GAAAK,OAAAC,QAAA,yBAAAb,EAAAc,eAAAH,GAAAR,KAAA,SAAAT,GAAAM,EAAAe,UAAAN,MAAA,SAAAf,GAAAU,QAAAM,MAAAhB,OAAAe,MAAA,SAAAf,GAAAU,QAAAM,MAAAhB,KAAA,QAAAc,KAAAD,GAAAS,EAAAtB,EAAAuB,MAAA,IAAAC,EAAAC,GAAA,GAAAH,EAAAI,OAAAC,KAAAjB,QAAAM,MAAA,qBAAA,QAAAW,KAAAC,EAAAC,GAAA,QAAAD,GAAA5B,GAAA8B,KAAAC,MAAAlB,GAAAmB,EAAA,OAAAhC,IAAAiC,EAAAC,YAAA,SAAAC,EAAAC,SAAA,UAAA,QAAAX,KAAAY,GAAAb,EAAAlB,EAAAgC,iBAAA7B,KAAA,SAAAR,GAAA,MAAAsC,GAAA,GAAAA,IAAAtC,MAAAK,GAAAe,QAAAZ,KAAA,WAAAC,QAAA8B,IAAA,iBAAAL,EAAAD,YAAA,WAAAnB,MAAA,SAAAf,GAAAU,QAAAM,MAAAhB,MAAAuC,EAAAtC,MAAAD,GAAAyC,MAAAC,KAAA,OAAAC,IAAA,sBAAAC,MAAAC,iBAAAC,EAAAC,SAAAC,EAAAC,eAAAZ,EAAAa,eAAArC,EAAAsC,YAAAlD,KAAAmD,KAAA,SAAApD,GAAAA,EAAAqD,SAAAhB,EAAA,EAAAR,EAAA7B,EAAAsD,qBAAA1B,EAAAC,KAAAnB,QAAAM,MAAAhB,EAAAuD,KAAAjD,EAAAe,QAAAZ,KAAA,cAAAM,MAAA,SAAAf,GAAAU,QAAAM,MAAAhB,WAAAe,MAAA,SAAAf,GAAAU,QAAAM,MAAAhB,KAAA,QAAAwD,KAAAxD,EAAAyC,MAAAC,KAAA,OAAAC,IAAA,qBAAAC,MAAAG,SAAAC,KAAAI,KAAA,SAAApD,GAAAA,EAAAqD,SAAA3C,QAAAM,MAAAhB,EAAAuD,OAAA,QAAAE,KAAAzD,EAAAyC,MAAAC,KAAA,OAAAC,IAAA,yBAAAC,MAAAC,iBAAAC,EAAAY,UAAAC,EAAAC,eAAAC,KAAAT,KAAA,SAAApD,GAAAA,EAAAqD,QAAAS,EAAA9D,EAAA+D,UAAArD,QAAAM,MAAAhB,EAAAuD,KAAAjC,EAAAI,OAAApB,EAAAoB,UAAA,QAAAsC,KAAAhE,EAAAyC,MAAAC,KAAA,OAAAC,IAAA,uBAAAC,MAAAC,iBAAAC,EAAAY,UAAAC,EAAAC,eAAAC,KAAAT,KAAA,SAAApD,GAAAA,EAAAqD,QAAAnC,OAAA+C,SAAAC,KAAAC,GAAAzD,QAAAM,MAAAhB,EAAAuD,KAAAjC,EAAAI,OAAApB,EAAAoB,UAAA,QAAA0C,KAAA,MAAAnE,GAAAoE,OAAA,cAAAC,QAAAvB,SAAAC,KAAAvC,KAAA,SAAAT,MAAAe,MAAA,SAAAf,GAAAU,QAAAM,MAAAhB,KAAA,QAAAuE,KAAA,MAAAtE,GAAAoE,OAAA,gBAAAC,QAAAzB,iBAAAC,EAAAc,eAAAC,KAAApD,KAAA,SAAAT,MAAAe,MAAA,SAAAf,GAAAU,QAAAM,MAAAhB,KAAA,GAAAuC,GAAAjC,EAAA,KAAAkE,EAAAxE,EAAA,gBAAAwB,EAAAgD,EAAA5B,KAAA,YAAAtB,EAAA,KAAAe,EAAA,EAAAL,GAAAwC,EAAA5B,KAAA,gBAAA4B,EAAA5B,KAAA,iBAAA/B,EAAA,KAAA4D,EAAAzE,EAAA,sBAAA8D,GAAA,EAAA7B,EAAAjC,EAAA,kBAAAmE,EAAAlC,EAAAyC,SAAAC,KAAA,QAAAxC,EAAAnC,EAAA,qBAAAgD,EAAAwB,EAAA5B,KAAA,MAAAf,EAAA2C,EAAA5B,KAAA,cAAA3B,EAAAuD,EAAA5B,KAAA,gBAAAE,EAAAb,EAAAW,KAAA,oBAAAe,EAAA1B,EAAAW,KAAA,aAAAiB,EAAA5B,EAAAW,KAAA,kBAAAgC,EAAA,GAAAzE,EAAAH,GAAA,WAAAI,MAAA6B,EAAA4C,GAAA,QAAA,SAAA7E,GAAAA,EAAA8E,iBAAAd,MAAA1D,EAAAuE,GAAA,OAAA,SAAA7E,GAAA4E,EAAAG,QAAAtB,IAAAnC,EAAAyD,MAAA,IAAAvD,KAAAlB,EAAAuE,GAAA,QAAA,SAAA7E,GAAAU,QAAAC,KAAA,UAAAD,QAAAM,MAAAhB,KAAAM,EAAAuE,GAAA,QAAA,SAAA7E,GAAAU,QAAAC,KAAA,iBAAAW,EAAAD,QAAAmC,MAAAlD,EAAAuE,GAAA,QAAA,SAAA3E,GAAAQ,QAAAC,KAAA,iBAAAW,EAAAD,QAAAO,EAAAC,EAAAL,GAAAgC,IAAAM,GAAAkB,WAAA,WAAAhF,EAAA,UAAAkC,YAAA,SAAA0C,EAAAK,OAAAC,WAAA,EAAAC,aAAAC,QAAA,MAAAX,EAAAY,KAAAT,EAAAU,gBAAAC,WAAA,+BAAAX,EAAAY,iBAAA,iBAAA,SAAAxF,GAAAyE,EAAAY,KAAAT,EAAAU,gBAAAC,WAAA,iCAAAX,EAAAY,iBAAA,iBAAA,SAAAxF,GAAAyE,EAAAY,KAAA,iBAAAL,WAAA,WAAA9D,OAAAuE,MAAA,yDAAAxF,EAAAyF,KAAAtB,IAAAG,MAAA9D,KAAAR,EAAA0F,OAAA,SAAA3F,EAAAC,GAAAiB,OAAA+C,SAAA2B,aAAA,QAAA,OAAAzD,EAAA0C,GAAA,QAAA,SAAA7E,GAAAA,EAAA8E,iBAAAxE,EAAAuF,SAAApF,KAAA,WAAA0B,EAAAC,SAAA,WAAArB,MAAA,SAAAf,GAAAU,QAAA8B,IAAAxC","file":"video.js","sourcesContent":["\"use strict\";requirejs([\"jquery\",\"axios\",\"Vimeo\",\"easyTimer\",\"jqueryTimer\"],function(e,n,o,t){function i(){var e={loop:!1};h=new o(\"videoplayer\",e),h.setVolume(.5),h.ready().then(function(){console.info(\"Player is ready.\"),h.getDuration().then(function(e){T=e,r()}).catch(function(e){console.error(e)}),O<T-5&&window.confirm(\"마지막 재생시점으로 이동하시겠습니까?\")&&h.setCurrentTime(O).then(function(e){h.pause()}).catch(function(e){console.error(e)})}).catch(function(e){console.error(e)})}function r(){T?(g=e.timer(1e3*v,c,!0),g.stop(),s()):console.error(\"재생시간을 확인할 수 없습니다.\")}function s(){a(V)}function a(e){Math.floor(T*(w/100))<=e&&(C.removeClass(\"blind\"),S.addClass(\"blind\"))}function c(){y+=v,h.getCurrentTime().then(function(n){return m>0&&m===n?void h.pause().then(function(){console.log(\"비디오가 중지되었습니다.\"),S.removeClass(\"blind\")}).catch(function(e){console.error(e)}):(m=n,void e.ajax({type:\"POST\",url:\"/video/log/playtime\",data:{training_user_id:q,video_id:P,played_seconds:y,video_duration:T,currenttime:n}}).done(function(e){e.success?(y=0,V=e.total_played_seconds,a(V)):(console.error(e.msg),h.pause().then(function(){}).catch(function(e){console.error(e)}))}))}).catch(function(e){console.error(e)})}function u(){e.ajax({type:\"POST\",url:\"/video/log/endtime\",data:{video_id:P}}).done(function(e){e.success||console.error(e.msg)})}function d(){e.ajax({type:\"POST\",url:\"/session/log/starttime\",data:{training_user_id:q,course_id:D,course_list_id:E}}).done(function(e){e.success?j=e.hasEnded:(console.error(e.msg),g.stop(),h.stop())})}function l(){e.ajax({type:\"POST\",url:\"/session/log/endtime\",data:{training_user_id:q,course_id:D,course_list_id:E}}).done(function(e){e.success?window.location.href=x:(console.error(e.msg),g.stop(),h.stop())})}function f(){return n.delete(\"/video/log\",{params:{video_id:P}}).then(function(e){}).catch(function(e){console.error(e)})}function p(){return n.delete(\"/session/log\",{params:{training_user_id:q,course_list_id:E}}).then(function(e){}).catch(function(e){console.error(e)})}var m,h=null,_=e(\".videoplayer\"),v=_.data(\"interval\"),g=null,y=0,w=(_.data(\"wait-seconds\"),_.data(\"passive-rate\")),T=null,b=e(\"#countdown .values\"),j=!1,C=e(\"#btn_play_next\"),x=C.parent().attr(\"href\"),S=e(\"#btn_replay_video\"),P=_.data(\"id\"),V=_.data(\"total-play\"),O=_.data(\"current-time\"),q=C.data(\"training-user-id\"),D=C.data(\"course-id\"),E=C.data(\"course-list-id\"),k=new t;e(function(){i()}),C.on(\"click\",function(e){e.preventDefault(),l()}),h.on(\"play\",function(e){k.reset(),d(),g.reset(1e3*v)}),h.on(\"error\",function(e){console.info(\"error!\"),console.error(e)}),h.on(\"pause\",function(e){console.info(\"player: pause\"),g.pause(),u()}),h.on(\"ended\",function(o){console.info(\"player: ended\"),g.pause(),a(V+v),u(),j||setTimeout(function(){e(\".timer\").removeClass(\"blind\"),k.start({countdown:!0,startValues:{seconds:30}}),b.html(k.getTimeValues().toString()+\" 초 이내 <b>다음</b> 버튼을 클릭해주세요.\"),k.addEventListener(\"secondsUpdated\",function(e){b.html(k.getTimeValues().toString()+\" 초 이내 <b>다음</b> 버튼을 클릭해주세요.\")}),k.addEventListener(\"targetAchieved\",function(e){b.html(\"학습 초기화 중입니다..\"),setTimeout(function(){window.alert(\"30초 동안 다음 버튼을 누르지 않아 학습을 초기화 하였습니다.\\n\\n재시청 해주시기 바랍니다.\"),n.all([f(),p()]).then(n.spread(function(e,n){window.location.reload()}))},3e3)})},1e3)}),S.on(\"click\",function(e){e.preventDefault(),h.unload().then(function(){S.addClass(\"blind\")}).catch(function(e){console.log(e)})})});"],"sourceRoot":"/source/"}