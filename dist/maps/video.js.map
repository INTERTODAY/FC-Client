{"version":3,"sources":["video.js"],"names":["requirejs","n","o","e","t","i","loop","m","setVolume","ready","then","console","info","getDuration","log","T","r","catch","error","O","window","confirm","setCurrentTime","pause","v","timer","_","a","stop","s","c","V","Math","floor","w","C","removeClass","S","addClass","y","getCurrentTime","g","ajax","type","url","data","training_user_id","q","video_id","P","played_seconds","video_duration","currenttime","done","success","total_played_seconds","msg","l","u","course_id","D","course_list_id","E","j","hasEnded","d","location","href","x","f","delete","params","p","h","b","parent","attr","k","on","preventDefault","reset","setTimeout","start","countdown","startValues","seconds","html","getTimeValues","toString","addEventListener","alert","all","spread","reload","unload"],"mappings":"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","file":"video.js","sourcesContent":["\"use strict\";requirejs([\"jquery\",\"axios\",\"Vimeo\",\"easyTimer\",\"jqueryTimer\"],function(n,o,e,t){function i(){var n={loop:!1};m=new e(\"videoplayer\",n),m.setVolume(.5),m.ready().then(function(){console.info(\"Player is ready.\"),m.getDuration().then(function(n){console.log(\"duration : \",n),T=n,r()}).catch(function(n){console.error(n)}),O<T-5&&window.confirm(\"마지막 재생시점으로 이동하시겠습니까?\")&&m.setCurrentTime(O).then(function(n){m.pause()}).catch(function(n){console.error(n)})}).catch(function(n){console.error(n)})}function r(){T?(v=n.timer(1e3*_,a,!0),v.stop(),s()):console.error(\"재생시간을 확인할 수 없습니다.\")}function s(){c(V)}function c(n){Math.floor(T*(w/100))<=n&&(C.removeClass(\"blind\"),S.addClass(\"blind\"))}function a(){console.log(\"logging...\"),y+=_,m.getCurrentTime().then(function(o){return g>0&&g===o?void m.pause().then(function(){console.log(\"비디오가 중지되었습니다.\"),S.removeClass(\"blind\")}).catch(function(n){console.error(n)}):(g=o,void n.ajax({type:\"POST\",url:\"/video/log/playtime\",data:{training_user_id:q,video_id:P,played_seconds:y,video_duration:T,currenttime:o}}).done(function(n){n.success?(y=0,V=n.total_played_seconds,c(V)):(console.error(n.msg),m.pause().then(function(){}).catch(function(n){console.error(n)}))}))}).catch(function(n){console.error(n)})}function l(){console.log(\"video log end\"),n.ajax({type:\"POST\",url:\"/video/log/endtime\",data:{video_id:P}}).done(function(n){n.success||console.error(n.msg)})}function u(){console.log(\"session log start\"),n.ajax({type:\"POST\",url:\"/session/log/starttime\",data:{training_user_id:q,course_id:D,course_list_id:E}}).done(function(n){n.success?j=n.hasEnded:(console.error(n.msg),v.stop(),m.stop())})}function d(){console.log(\"session log end\"),n.ajax({type:\"POST\",url:\"/session/log/endtime\",data:{training_user_id:q,course_id:D,course_list_id:E}}).done(function(n){n.success?window.location.href=x:(console.error(n.msg),v.stop(),m.stop())})}function f(){return o.delete(\"/video/log\",{params:{video_id:P}}).then(function(n){}).catch(function(n){console.error(n)})}function p(){return o.delete(\"/session/log\",{params:{training_user_id:q,course_list_id:E}}).then(function(n){}).catch(function(n){console.error(n)})}var g,m=null,h=n(\".videoplayer\"),_=h.data(\"interval\"),v=null,y=0,w=(h.data(\"wait-seconds\"),h.data(\"passive-rate\")),T=null,b=n(\"#countdown .values\"),j=!1,C=n(\"#btn_play_next\"),x=C.parent().attr(\"href\"),S=n(\"#btn_replay_video\"),P=h.data(\"id\"),V=h.data(\"total-play\"),O=h.data(\"current-time\"),q=C.data(\"training-user-id\"),D=C.data(\"course-id\"),E=C.data(\"course-list-id\"),k=new t;n(function(){i()}),C.on(\"click\",function(n){n.preventDefault(),k.stop(),d()}),m.on(\"play\",function(n){u(),v.reset(1e3*_)}),m.on(\"error\",function(n){console.info(\"error!\"),console.error(n)}),m.on(\"pause\",function(n){console.info(\"player: pause\"),v.pause(),l()}),m.on(\"ended\",function(e){console.info(\"player: ended\"),v.pause(),c(V+_),l(),j||setTimeout(function(){n(\".timer\").removeClass(\"blind\"),console.log(\"second timer started\"),k.start({countdown:!0,startValues:{seconds:30}}),b.html(k.getTimeValues().toString()+\" 초 이내 <b>다음</b> 버튼을 클릭해주세요.\"),k.addEventListener(\"secondsUpdated\",function(n){b.html(k.getTimeValues().toString()+\" 초 이내 <b>다음</b> 버튼을 클릭해주세요.\")}),k.addEventListener(\"targetAchieved\",function(n){b.html(\"학습 초기화 중입니다..\"),setTimeout(function(){window.alert(\"30초 동안 다음 버튼을 누르지 않아 학습을 초기화 하였습니다.\\n\\n재시청 해주시기 바랍니다.\"),o.all([f(),p()]).then(o.spread(function(n,o){window.location.reload()}))},3e3)})},1e3)}),S.on(\"click\",function(n){n.preventDefault(),m.unload().then(function(){S.addClass(\"blind\")}).catch(function(n){console.log(n)})})});"],"sourceRoot":"/source/"}