{"version":3,"sources":["video.js"],"names":["requirejs","n","o","e","t","loop","m","setVolume","ready","then","console","info","getDuration","b","i","catch","error","k","window","confirm","setCurrentTime","pause","v","timer","g","a","stop","r","c","D","Math","floor","j","P","removeClass","S","addClass","w","getCurrentTime","_","log","ajax","type","url","data","training_user_id","V","video_id","q","played_seconds","video_duration","currenttime","done","success","total_played_seconds","msg","s","u","course_id","E","course_list_id","M","C","hasEnded","l","location","href","O","d","T","x","html","y","alert","all","f","p","spread","reload","delete","params","h","parent","attr","on","preventDefault","reset","setTimeout","unload"],"mappings":"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","file":"video.js","sourcesContent":["\"use strict\";requirejs([\"jquery\",\"axios\",\"Vimeo\",\"jqueryTimer\"],function(n,o,e){function t(){var n={loop:!1};m=new e(\"videoplayer\",n),m.setVolume(.5),m.ready().then(function(){console.info(\"Player is ready.\"),m.getDuration().then(function(n){b=n,i()}).catch(function(n){console.error(n)}),k<b-5&&window.confirm(\"마지막 재생시점으로 이동하시겠습니까?\")&&m.setCurrentTime(k).then(function(n){m.pause()}).catch(function(n){console.error(n)})}).catch(function(n){console.error(n)})}function i(){b?(v=n.timer(1e3*g,a,!0),v.stop(),r()):console.error(\"재생시간을 확인할 수 없습니다.\")}function r(){c(D)}function c(n){Math.floor(b*(j/100))<=n&&(P.removeClass(\"blind\"),S.addClass(\"blind\"))}function a(){w+=g,m.getCurrentTime().then(function(o){return _>0&&_===o?void m.pause().then(function(){console.log(\"비디오가 중지되었습니다.\"),S.removeClass(\"blind\")}).catch(function(n){console.error(n)}):(_=o,void n.ajax({type:\"POST\",url:\"/video/log/playtime\",data:{training_user_id:V,video_id:q,played_seconds:w,video_duration:b,currenttime:o}}).done(function(n){n.success?(w=0,D=n.total_played_seconds,c(D)):(console.error(n.msg),m.pause().then(function(){}).catch(function(n){console.error(n)}))}))}).catch(function(n){console.error(n)})}function s(){n.ajax({type:\"POST\",url:\"/video/log/endtime\",data:{video_id:q}}).done(function(n){n.success||console.error(n.msg)})}function u(){n.ajax({type:\"POST\",url:\"/session/log/starttime\",data:{training_user_id:V,course_id:E,course_list_id:M}}).done(function(n){n.success?C=n.hasEnded:(console.error(n.msg),v.stop(),m.stop())})}function l(){n.ajax({type:\"POST\",url:\"/session/log/endtime\",data:{training_user_id:V,course_id:E,course_list_id:M}}).done(function(n){n.success?window.location.href=O:(console.error(n.msg),v.stop(),m.stop())})}function d(){T-=1,x.html(\" ( \"+T+\" 초 이내 클릭 )\"),T<=0&&(y.stop(),window.alert(\"비디오를 재시청 해주시기 바랍니다.\"),o.all([f(),p()]).then(o.spread(function(n,o){window.location.reload()})))}function f(){return o.delete(\"/video/log\",{params:{video_id:q}}).then(function(n){}).catch(function(n){console.error(n)})}function p(){return o.delete(\"/session/log\",{params:{training_user_id:V,course_list_id:M}}).then(function(n){}).catch(function(n){console.error(n)})}var _,m=null,h=n(\".videoplayer\"),g=h.data(\"interval\"),v=null,y=null,w=0,T=h.data(\"wait-seconds\"),j=h.data(\"passive-rate\"),b=null,x=n(\".wait-message\"),C=!1,P=n(\"#btn_play_next\"),O=P.parent().attr(\"href\"),S=n(\"#btn_replay_video\"),q=h.data(\"id\"),D=h.data(\"total-play\"),k=h.data(\"current-time\"),V=P.data(\"training-user-id\"),E=P.data(\"course-id\"),M=P.data(\"course-list-id\");n(function(){t()}),P.on(\"click\",function(n){n.preventDefault(),l()}),m.on(\"play\",function(n){u(),v.reset(1e3*g)}),m.on(\"error\",function(n){console.info(\"error!\"),console.error(n)}),m.on(\"pause\",function(n){console.info(\"player: pause\"),v.pause(),s()}),m.on(\"ended\",function(o){console.info(\"player: ended\"),v.pause(),c(D+g),s(),C||setTimeout(function(){y=n.timer(1e3,d,!0)},3e3)}),S.on(\"click\",function(n){n.preventDefault(),m.unload().then(function(){S.addClass(\"blind\")}).catch(function(n){console.log(n)})})});"],"sourceRoot":"/source/"}