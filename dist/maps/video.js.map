{"version":3,"sources":["video.js"],"names":["requirejs","n","e","o","t","i","loop","_","setVolume","ready","then","console","info","getDuration","b","r","catch","error","q","window","confirm","setCurrentTime","pause","y","timer","g","c","stop","s","a","O","Math","floor","T","x","removeClass","P","addClass","w","getCurrentTime","m","log","ajax","type","url","data","training_user_id","D","video_id","V","played_seconds","video_duration","currenttime","done","success","total_played_seconds","msg","u","d","course_id","E","course_list_id","k","C","hasEnded","l","location","href","S","f","delete","params","p","h","v","j","parent","attr","on","preventDefault","reset","setTimeout","start","countdown","startValues","seconds","html","getTimeValues","toString","addEventListener","alert","all","spread","reload","unload"],"mappings":"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","file":"video.js","sourcesContent":["\"use strict\";requirejs([\"jquery\",\"axios\",\"Vimeo\",\"easyTimer\",\"jqueryTimer\"],function(n,e,o,t){function i(){var n={loop:!1};_=new o(\"videoplayer\",n),_.setVolume(.5),_.ready().then(function(){console.info(\"Player is ready.\"),_.getDuration().then(function(n){b=n,r()}).catch(function(n){console.error(n)}),q<b-5&&window.confirm(\"마지막 재생시점으로 이동하시겠습니까?\")&&_.setCurrentTime(q).then(function(n){_.pause()}).catch(function(n){console.error(n)})}).catch(function(n){console.error(n)})}function r(){b?(y=n.timer(1e3*g,c,!0),y.stop(),s()):console.error(\"재생시간을 확인할 수 없습니다.\")}function s(){a(O)}function a(n){Math.floor(b*(T/100))<=n&&(x.removeClass(\"blind\"),P.addClass(\"blind\"))}function c(){w+=g,_.getCurrentTime().then(function(e){return m>0&&m===e?void _.pause().then(function(){console.log(\"비디오가 중지되었습니다.\"),P.removeClass(\"blind\")}).catch(function(n){console.error(n)}):(m=e,void n.ajax({type:\"POST\",url:\"/video/log/playtime\",data:{training_user_id:D,video_id:V,played_seconds:w,video_duration:b,currenttime:e}}).done(function(n){n.success?(w=0,O=n.total_played_seconds,a(O)):(console.error(n.msg),_.pause().then(function(){}).catch(function(n){console.error(n)}))}))}).catch(function(n){console.error(n)})}function u(){n.ajax({type:\"POST\",url:\"/video/log/endtime\",data:{video_id:V}}).done(function(n){n.success||console.error(n.msg)})}function d(){n.ajax({type:\"POST\",url:\"/session/log/starttime\",data:{training_user_id:D,course_id:E,course_list_id:k}}).done(function(n){n.success?C=n.hasEnded:(console.error(n.msg),y.stop(),_.stop())})}function l(){n.ajax({type:\"POST\",url:\"/session/log/endtime\",data:{training_user_id:D,course_id:E,course_list_id:k}}).done(function(n){n.success?window.location.href=S:(console.error(n.msg),y.stop(),_.stop())})}function f(){return e.delete(\"/video/log\",{params:{video_id:V}}).then(function(n){}).catch(function(n){console.error(n)})}function p(){return e.delete(\"/session/log\",{params:{training_user_id:D,course_list_id:k}}).then(function(n){}).catch(function(n){console.error(n)})}var m,h,_=null,v=n(\".videoplayer\"),g=v.data(\"interval\"),y=null,w=0,T=(v.data(\"wait-seconds\"),v.data(\"passive-rate\")),b=null,j=n(\"#countdown .values\"),C=!1,x=n(\"#btn_play_next\"),S=x.parent().attr(\"href\"),P=n(\"#btn_replay_video\"),V=v.data(\"id\"),O=v.data(\"total-play\"),q=v.data(\"current-time\"),D=x.data(\"training-user-id\"),E=x.data(\"course-id\"),k=x.data(\"course-list-id\");n(function(){i()}),x.on(\"click\",function(n){n.preventDefault(),l()}),_.on(\"play\",function(n){d(),y.reset(1e3*g)}),_.on(\"error\",function(n){console.info(\"error!\"),console.error(n)}),_.on(\"pause\",function(n){console.info(\"player: pause\"),y.pause(),u()}),_.on(\"ended\",function(o){console.info(\"player: ended\"),y.pause(),a(O+g),u(),C||setTimeout(function(){n(\".timer\").removeClass(\"blind\"),h=new t,h.start({countdown:!0,startValues:{seconds:30}}),j.html(h.getTimeValues().toString()+\" 초 이내 <b>다음</b> 버튼을 클릭해주세요.\"),h.addEventListener(\"secondsUpdated\",function(n){j.html(h.getTimeValues().toString()+\" 초 이내 <b>다음</b> 버튼을 클릭해주세요.\")}),h.addEventListener(\"targetAchieved\",function(n){j.html(\"학습 초기화 중입니다..\"),setTimeout(function(){window.alert(\"30초 동안 다음 버튼을 누르지 않아 학습을 초기화 하였습니다.\\n\\n재시청 해주시기 바랍니다.\"),e.all([f(),p()]).then(e.spread(function(n,e){window.location.reload()}))},3e3)})},1e3)}),P.on(\"click\",function(n){n.preventDefault(),_.unload().then(function(){P.addClass(\"blind\")}).catch(function(n){console.log(n)})})});"],"sourceRoot":"/source/"}