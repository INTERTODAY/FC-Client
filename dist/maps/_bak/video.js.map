{"version":3,"sources":["_bak/video.js"],"names":["requirejs","e","t","n","i","get","g","interval","y","timer","r","stop","h","waiting_seconds","o","delete","params","video_id","L","then","catch","console","log","s","training_user_id","P","course_list_id","q","a","D","html","v","alert","all","spread","location","reload","m","ajax","type","url","data","timer_played_seconds","video_duration","C","done","success","T","total_played_seconds","p","error","msg","E","plyr","d","course_id","S","M","hasEnded","u","href","O","c","l","getDuration","Math","floor","x","removeClass","f","_","w","css","b","height","j","autoplay","debug","setup","parent","attr","addEventListener","reset","pause","window","bind","on","preventDefault"],"mappings":"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","file":"_bak/video.js","sourcesContent":["\"use strict\";requirejs([\"jquery\",\"axios\",\"plyr\",\"jqueryTimer\"],function(e,t,n){function i(){e.get(\"/video/settings\",function(t){g=t.interval,y=e.timer(1e3*g,r,!0),y.stop(),h=t.waiting_seconds})}function o(){return t.delete(\"/video/log\",{params:{video_id:L}}).then(function(e){}).catch(function(e){console.log(e)})}function s(){return t.delete(\"/session/log\",{params:{training_user_id:P,course_list_id:q}}).then(function(e){}).catch(function(e){console.log(e)})}function a(){h-=1,D.html(\" ( \"+h+\" 초 이내 클릭 )\"),0===h&&(v.stop(),alert(\"비디오를 재시청 해주시기 바랍니다.\"),t.all([o(),s()]).then(t.spread(function(e,t){location.reload()})))}function r(){m+=g,e.ajax({type:\"POST\",url:\"/video/log/playtime\",data:{training_user_id:P,video_id:L,timer_played_seconds:m,video_duration:C}}).done(function(e){e.success?(m=0,T=e.total_played_seconds,p(T)):(console.error(e.msg),y.stop(),E.plyr.stop())})}function d(){e.ajax({type:\"POST\",url:\"/session/log/starttime\",data:{training_user_id:P,course_id:S,course_list_id:q}}).done(function(e){e.success?M=e.hasEnded:(y.stop(),E.plyr.stop())})}function u(){e.ajax({type:\"POST\",url:\"/session/log/endtime\",data:{training_user_id:P,course_id:S,course_list_id:q}}).done(function(e){e.success?location.href=O:(console.error(e.msg),y.stop(),E.plyr.stop())})}function c(){e.ajax({type:\"POST\",url:\"/video/log/endtime\",data:{video_id:L}}).done(function(e){e.success||console.error(e.msg)})}function l(e){C=E.plyr.getDuration(),p(T)}function p(e){Math.floor(.8*C)<=e&&x.removeClass(\"blind\")}function f(){var e=_(w);w.css(\"margin-top\",\"-\"+e/2+\"px\"),b.css(\"height\",e+\"px\"),w.removeClass(\"blind\")}function _(e){return Math.floor(e.height())}var g=0,y=null,v=null,m=0,h=0,j={autoplay:!1,debug:!1},x=(n.setup(e(\".js-player\"),j),e(\".btn_play\")),E=e(\".plyr__video-wrapper\")[0],b=e(\".video_section\"),w=e(\".tmp_video\"),L=w.data(\"id\"),T=w.data(\"total-play\"),O=x.parent().attr(\"href\"),P=x.data(\"training-user-id\"),S=x.data(\"course-id\"),q=x.data(\"course-list-id\"),C=null,D=e(\".wait-message\"),M=!1;e(function(){i()}),E.addEventListener(\"ready\",function(e){y.stop(),f(),l(e.type)}),E.addEventListener(\"play\",function(e){d(),l(e.type),y.reset(1e3*g)}),E.addEventListener(\"pause\",function(){y.pause(),c()}),E.addEventListener(\"timeupdate\",function(){}),E.addEventListener(\"ended\",function(){y.stop(),p(T+g),c(),M||(v=e.timer(1e3,a,!0))}),e(window).bind(\"resize\",function(){f()}),x.on(\"click\",function(e){e.preventDefault(),u()})});"],"sourceRoot":"/source/"}