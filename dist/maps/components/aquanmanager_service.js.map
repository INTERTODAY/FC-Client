{"version":3,"sources":["components/aquanmanager_service.js"],"names":["window","define","axios","self","AquaNManagerService","options","this","init","prototype","extend","b","hasOwnProperty","key","a","extendOptions","console","log","getDeviceType","navigator","userAgent","match","startPlayer","deviceType","videoStatus","params","device","video","training_user_id","videoUrl","course_id","courseId","course_list_id","video_id","videoId","video_status","total_played_seconds","totalPlayedSeconds","then","location","href","res","setTimeout","data","iosUrl","now","getTime","time","catch","err","androidUrl"],"mappings":"AAAA,YACAA,QAAOC,QAAPD,SAGE,SAAWE,GAGTC,QAAOC,GAAPC,GAAAF,EAAOG,KAGPH,EAAKI,cAALF,GACDF,EAAAI,OAPD,GAAIJ,GAAO,IAkFX,OAxEEC,GAAAI,WAEAH,WAEEI,OAAK,SAAWC,EAAGA,GACjB,IAAA,GAAMC,KAAAA,GACFC,EAAAA,eAAFA,KACDC,EAAAD,GAAAF,EAAAE,GARyB,OAAAC,IAc5BC,cAAA,SAAoBL,GACpBH,KAAKG,QAAOH,KAAKD,UAASA,KAA1BA,SAf4BC,KAAAG,OAAAH,KAAAD,QAAAA,IAmB5BU,KAAAA,WAnB4BA,QAAAC,IAAA,SAsB5BC,cAAKC,WACH,MAAAA,WAAAC,UAAAC,MAAA,YAAAF,UAAAC,UAAAC,MAAA,SACK,MACEF,UAAPC,UAAAC,MAAA,YACK,UACEF,UAAPC,UAAAC,MAAA,QACD,UADC,IAIFC,YAAIC,WAAJ,GAAIA,GAAanB,EAAKc,eAEtBF,SAAQC,IAAI,OAAQV,KAAKD,QAAQkB,aAG/BC,EAAAA,IAAQ,sBACNC,QACAC,OAAOJ,EACPK,MAAAA,KAAAA,QAAkBC,SAClBC,iBAAgBxB,KAALA,QAAayB,eACxBC,UAAAA,KAAgB1B,QAAKA,SACrB2B,eAAe3B,KAAAA,QAAQ4B,aACvBC,SAAAA,KAAc7B,QAAKA,QACnB8B,aAAmCC,KAAnCD,KAAAA,QAA2B9B,YAAQ+B,KAAb/B,QAAAkB,YAAyC,WARzDY,qBAAA,KAAA7B,KAAAD,QAAA+B,mBAAA9B,KAAAD,QAAA+B,mBAAA,KAaRC,KAAIf,SAAAA,GAEF,GAAA,QAAAA,EAAA,CACAtB,GAAAA,IAAOsC,GAASC,OAAOC,SAEvBC,QAAAA,SAAWF,KAAYC,EAAAE,KAAAC,OAEnBF,WAAIG,WACJH,WAAKG,YACIN,GAAAA,OAAPO,UACDC,EAAA,MACA9C,OALHsC,SAAAC,KAAA,8DAOG,KACL,SACuBC,YAAhBF,IAGVS,OAAMT,SAAUU,KAAKR,EAAAE,KAAAO,cAGvBF,MAAA,SAAAC,GAtEHjC,QAAAC,IAAAgC,OAyEO5C","file":"../../javascripts/components/aquanmanager_service.js","sourcesContent":["'use strict';\nwindow.define([\n  'axios'\n], function (axios) {\n  var self = null;\n\n  function AquaNManagerService (options) {\n    self = this;\n\n    self.extendOptions(options);\n    self.init();\n  }\n\n  AquaNManagerService.prototype = {\n    // 옵션 저장 변수\n    options: {},\n    // 옵션 저장 함수\n    extend: function (a, b) {\n      for (var key in b) {\n        if (b.hasOwnProperty(key)) {\n          a[key] = b[key];\n        }\n      }\n      return a;\n    },\n    // 옵션 확장\n    extendOptions: function (options) {\n      this.options = this.extend({}, this.options);\n      this.extend(this.options, options);\n    },\n    // 컴포넌트 초기화\n    init: function () {\n      console.log('init');\n    },\n    getDeviceType: function () {\n      if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPad/i))) {\n        return 'ios';\n      } else if (navigator.userAgent.match(/Android/i)) {\n        return 'android';\n      } else if (navigator.userAgent.match(/Mac/i)) {\n        return 'mac';\n      }\n    },\n    startPlayer: function () {\n      var deviceType = self.getDeviceType();\n\n      console.log('haha', this.options.videoStatus);\n\n      axios.get('/api/v1/aquaplayer', {\n        params: {\n          device: deviceType,\n          video: this.options.videoUrl,\n          training_user_id: this.options.trainingUserId,\n          course_id: this.options.courseId,\n          course_list_id: this.options.courseListId,\n          video_id: this.options.videoId,\n          video_status: this.options.videoStatus !== '' ? this.options.videoStatus : 'progress',\n          total_played_seconds: this.options.totalPlayedSeconds !== '' ? this.options.totalPlayedSeconds : 0\n        }\n      })\n      .then(function (res) {\n        // console.log(res.data);\n        if (deviceType === 'ios') {\n          var time = (new Date()).getTime();\n          // console.log(res.data.iosUrl);\n          window.location.href = res.data.iosUrl;\n\n          setTimeout(function () {\n            setTimeout(function () {\n              var now = (new Date()).getTime();\n              if ((now - time) < 400) {\n                window.location.href = 'https://itunes.apple.com/kr/app/aquanmanager/id1048325731';\n              }\n            }, 10);\n          }, 300);\n        } else if (deviceType === 'android') {\n          // console.log(res.data.androidUrl);\n          window.location.href = res.data.androidUrl;\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n    }\n  };\n\n  return AquaNManagerService;\n});\n\n"]}