"use strict";requirejs(["jquery"],function(e){function t(){s.ajax({type:"POST",url:"/session/log/starttime",data:{training_user_id:u,course_id:h,course_list_id:_,course_list_type:f}}).done(function(e){e.success||console.error(e.msg)})}function a(){s.ajax({type:"POST",url:"/session/log/endtime",data:{training_user_id:u,course_id:h,course_list_id:_,course_list_type:f}}).done(function(e){e.success?location.href=d:console.error(e.msg)})}function r(){var e=!0;return v?e:(s(".option").each(function(t){if(s(this).hasClass("answer_quiz_input")){if(""===s(this).val())return e=!1,!1}else if(0===s(this).children().children("a").children(".ico_checked").length)return e=!1,!1}),void(e?n.removeClass("blind"):n.addClass("blind")))}function i(){console.log("quiz!!");for(var e=s(".quiz_select"),t=[],a=0;a<e.length;a++){var r=s(e[a]),i=r.data("quiz-type"),l=r.data("quiz-id"),o=r.data("quiz-answer"),d={quiz_id:l,quiz_type:i,iscorrect:!1,answer:null};if("A"===i)r.attr("data-answered",r.children(".not-select").children(".answer_quiz_input").val().trim()),r.attr("data-iscorrect",r.attr("data-answered")==o?1:0);else{var v=r.children("ol.selection").children("li"),p=[];r.attr("data-iscorrect",1);for(var g=0;g<v.length;g++){s(v[g]).children("a").children(".ico_checked").length>0&&p.push(s(v[g]).children("a").children(".answer").text());var q=s(v[g]).attr("data-iscorrect"),m=s(v[g]).children("a").children(".ico_checked").length>0;q!=m&&r.attr("data-iscorrect",0),r.attr("data-answered",p.join(","))}}r.children(".result_quiz").removeClass("correct"),1!=r.attr("data-iscorrect")?r.children(".result_quiz").removeClass("blind").html("! 정답은 "+o+" 입니다."):r.children(".result_quiz").removeClass("blind").addClass("correct").html("정답입니다."),d.iscorrect=r.attr("data-iscorrect"),d.answer=r.attr("data-answered"),t.push(d)}console.log(t),s.ajax({type:"POST",url:"/quiz/log/checkanswer",data:{data:t,training_user_id:u,course_id:h,course_list_id:_,course_list_type:f}}).done(function(e){e.success?(n.addClass("blind"),c.removeClass("blind")):console.error(e.msg)})}var s=e,c=s("#btn_play_next"),n=s("#btn_check_answers"),l=s(".answer_quiz_input"),o=s(".ico:not(.ico_play)"),d=c.attr("href"),u=c.data("training-user-id"),h=c.data("course-id"),_=c.data("course-list-id"),f=c.data("course-list-type"),v=!1;s(function(){v=!n.hasClass("blind"),t()}),l.on("change keyup",function(e){r()}),o.click(function(e){e.preventDefault();var t=s(this);t.hasClass("ico_checked")?(t.removeClass("ico_checked"),t.addClass("ico_unchecked"),t.closest("a").attr("data-value",0)):(t.removeClass("ico_unchecked"),t.addClass("ico_checked"),t.closest("a").attr("data-value",1)),r()}),n.on("click",function(e){e.preventDefault(),i()}),c.on("click",function(e){e.preventDefault(),a()})});