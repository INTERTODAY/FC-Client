"use strict";window.requirejs(["common","Vimeo","easyTimer","jqueryTimer"],function(e,o,n){function t(e){Math.floor(g*(p/100))<=e&&(v.removeClass("blind"),y.addClass("blind"))}function s(){console.log("video log end"),d.ajax({type:"POST",url:"/video/log/endtime",data:{video_id:b}}).done(function(e){e.success||console.error(e.msg)})}function i(){console.log("session log start"),d.ajax({type:"POST",url:"/session/log/starttime",data:{training_user_id:x,course_id:S,course_list_id:j}}).done(function(e){e.success?h=e.hasEnded:(console.error(e.msg),m.stop(),c.stop())})}function a(){console.log("session log end"),d.ajax({type:"POST",url:"/session/log/endtime",data:{training_user_id:x,course_id:S,course_list_id:j}}).done(function(e){e.success?window.location.href=w:(console.error(e.msg),m.stop(),c.stop())})}function r(){return axios.delete("/video/log",{params:{video_id:b}}).then(function(e){}).catch(function(e){console.error(e)})}function l(){return axios.delete("/session/log",{params:{training_user_id:x,course_list_id:j}}).then(function(e){}).catch(function(e){console.error(e)})}var d=d||window.$,c=null,u=d(".videoplayer"),f=u.data("interval"),m=null,p=(u.data("wait-seconds"),u.data("passive-rate")),g=null,_=d("#countdown .values"),h=!1,v=d("#btn_play_next"),w=v.parent().attr("href"),y=d("#btn_replay_video"),b=u.data("id"),T=u.data("total-play"),x=(u.data("current-time"),v.data("training-user-id")),S=v.data("course-id"),j=v.data("course-list-id"),q=d("#aqua_html5"),C=d("#aqua_html5"),O=new n;d(function(){"Windows"===e.getOSName?q.show():C.show()}),v.on("click",function(e){e.preventDefault(),O.stop(),a()}),c.on("play",function(e){i(),m.reset(1e3*f)}),c.on("error",function(e){console.info("error!"),console.error(e)}),c.on("pause",function(e){console.info("player: pause"),m.pause(),s()}),c.on("ended",function(e){console.info("player: ended"),m.pause(),t(T+f),s(),h||setTimeout(function(){d(".timer").removeClass("blind"),console.log("second timer started"),O.start({countdown:!0,startValues:{seconds:30}}),_.html(O.getTimeValues().toString()+" 초 이내 <b>다음</b> 버튼을 클릭해주세요."),O.addEventListener("secondsUpdated",function(e){_.html(O.getTimeValues().toString()+" 초 이내 <b>다음</b> 버튼을 클릭해주세요.")}),O.addEventListener("targetAchieved",function(e){_.html("학습 초기화 중입니다.."),setTimeout(function(){window.alert("30초 동안 다음 버튼을 누르지 않아 학습을 초기화 하였습니다.\n\n재시청 해주시기 바랍니다."),axios.all([r(),l()]).then(axios.spread(function(e,o){window.location.reload()}))},3e3)})},1e3)}),y.on("click",function(e){e.preventDefault(),c.unload().then(function(){y.addClass("blind")}).catch(function(e){console.log(e)})})});
//# sourceMappingURL=../maps/video_pc.js.map
